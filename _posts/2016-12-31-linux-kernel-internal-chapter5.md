---
layout: post
title: "리눅스커널 내부구조 5장"
description: "리눅스커널 내부구조 5장"
comments: true
keywords: "linux kernel"
author: 홍석준
---

Q. /proc 파일 시스템의 정체?
 - 파일 시스템은 무조건 Disk를 거치는 걸까?
 - 경남 뇌피셜 : /proc 은 커널의 내부 상태를 계산할 수 있는 함수들이 잘 정의된 가상 파일 시스템이다.

1. VFS 는 “파일 이름”으로 어떤 파일 시스템에 속해있는지를 판단한다
2. 그 파일의 정보를 긁어모아, 그 파일 시스템에 맞는 고유한 open 함수를 호출한다

<< 플스에 대한 논의 >>
조경민 : 이병준이 PS3 와 PS4 가 호환이 안된다더라, 아키텍쳐 문제라는데, 커널처럼 파일 시스템 레이어를 둬서 호환하게끔 하면 안되나
남창현 : 콘솔 게임기들은 하드웨어 최적화가 너무 잘되어있다더라, 레이어 하나 추가가 쉽지 않은 일이다
홍석준 : 파일 시스템의 문제만이 아니라 GPU 같은 그래픽 쪽 호환문제일 수도 잇다. 이전 버전 호환으로 성능 늦어질까봐..

Q. 어떻게 VFS 가 파일 이름(절대경로)만으로 어떤 파일 시스템에 저장된지 알 수 있는걸까?
 - 리눅스는 VFS 내에 4개의 객체를 도입했다고 한다. 사용자 태스크에게 제공할 일관된 인터페이스.
 - 수퍼블록 객체는 각 마운트된 파일시스템의 수퍼블록을 읽어서 범용적인 구조체인 수퍼 블록 객체(!)에 정의한다.(마운트할 때)
 - 아이노드 객체는 특정 ‘파일’과 관련된 정보를 담기 위한 VFS의 구조체이다. VFS 는 아이노드 객체에!, 각 파일시스템들의 inode로부터 데이터를 담아 준다.
   그러면 VFS는 각 파일시스템의 각기다른 inode 객체들을 하나로 통합된 구조체(아이노드)로 다룰 수 있게 된것이다!, 해당 파일에 대한 아주 많은 정보가 있다. 그 파티션의 inode 넘버, 접근 제어, inode 를 가리키고있는 파일 수, 파일 크기 등
 - 파일 객체, 디엔트리 객체는 5.8 를 읽으며 파악하자

Q. 디엔트리 객체? ‘디엔트리 객체는 캐시역할을 한다.’ 라고 하였는데, 디렉터리 경로가 복잡할 때, 최종 inode 까지 참조하기 위한 과정을 줄여준다는 점은 이해간다.
   하지만, 캐시? 어떤점이 빨리지지?